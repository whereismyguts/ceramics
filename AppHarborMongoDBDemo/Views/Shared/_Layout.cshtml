<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:100" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-latest.min.js"
            type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css" />
    @*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>*@
    @{
        ViewBag.Title = "Авторская керамика|Сорокин сад";
    }
</head>

<body>



    <div class="header-menu">
        <a href="/work" class="header-menu-item"><span> Процесс </span></a>
        <a href="/" class="logo"> </a>
        <a href="/contact" class="header-menu-item"><span> Связаться </span></a>
    </div>

    <div class="cart-sidebar">


    </div>

    @RenderBody()



    <div class="footer">
        <p>SorokinSad.com - 2017. Made by <a href="mylink">A. Karmanov</a></p>

    </div>

    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.image-container').slick();
            refreshCart();
        });

        countCardItem
        function countCardItem(id, count) {
            $.ajax({
                type: "POST",
                url: "/Home/CountCartItem",
                data: { itemId: id, delta:count },
                success: function (res) {
                    refreshCart();
                },
                datatype: "json",
                traditional: true
            });
        }

        function removeCardItem(id) {
            $.ajax({
                type: "POST",
                url: "/Home/RemoveCartItem",
                data: {itemId: id},
                success: function (res) {
                    refreshCart();
                },
                datatype: "json",
                traditional: true
            });
        }

        function refreshCart() {
            $.ajax({
                type: "POST",
                url: "/Home/GetCartItems",
                success: function (res) {
                    
                    if (res) {
                        $('.cart-sidebar').empty();
                        $('.cart-sidebar').append(res);
                        $('.cart-sidebar').css("animation", "0.5s rollin");
                        $('.cart-sidebar').css("right", "0px");
                        //res.forEach(function (item, i, res) {
                        //    $('.cart-sidebar').append('<p>'+item+'</p>');

                        //});
                    }
                    else {
                        $('.cart-sidebar').css("animation", "0.5s rollout");
                        $('.cart-sidebar').css("right", "-360px");
                    }
                    
                },
                datatype: "json",
                traditional: true
            });
        }

        $(window).scroll(function () {
            if ($(window).scrollTop() + $(window).height() == $(document).height()) {
                $('.footer').css("opacity", 1);
            } else {
                $('.footer').css("opacity", 0);
            }
        });
    </script>
</body>
</html>
